<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  </head>
  <body>
  <a-scene cursor="rayOrigin: mouse">
          <a-assets>
          <!-- Imatges 360 -->
          <img id="i01" src="ex8 assets/imatges/imatge0.jpg">
          <img id="i02" src="ex8 assets/imatges/torreSuperior.jpg">
          <img id="i03" src="ex8 assets/imatges/Pati.jpg">
          <img id="i04" src="ex8 assets/imatges/Planta2.jpg">
          <img id="i05" src="ex8 assets/imatges/Planta1.png">
          <img id="i06" src="ex8 assets/imatges/PlantaMenos1.jpg">
          <img id="i07" src="ex8 assets/imatges/cisterna.jpg">
          <img id="i08" src="ex8 assets/imatges/ermitaAltar.jpg">
          <img id="i09" src="ex8 assets/imatges/runesCastell.jpg">
          <img id="i10" src="ex8 assets/imatges/bruh.jpg">
     
          <!--imatge del plano-->  
          <img id="plano" src="ex8 assets/imatges/plano.jpg">


         
          <!-- Audios -->
          <audio id="audio1" src="ex8 assets/audios/torre.mp3"></audio>
          <audio id="Pati" src="ex8 assets/audios/Pati.mp3"></audio>
          <audio id="Planta2" src="ex8 assets/audios/Planta2.mp3"></audio>
          <audio id="Planta1" src="ex8 assets/audios/Planta1.mp3"></audio>
          <audio id="Planta-1" src="ex8 assets/audios/Plantamenys1.mp3"></audio>
          <audio id="cisterna" src="ex8 assets/audios/cisterna.mp3"></audio>
          <audio id="ermita" src="ex8 assets/audios/ermita.mp3"></audio>
          <audio id="castell" src="ex8 assets/audios/castell.mp3"></audio>


        </a-assets>


        <a-entity camera look-controls wasd-controls="false">
        <!-- fuseTimeout = el temps que triga en fer click des de que es posiciona sobre un objecte-->
        <a-entity id="myCursor" cursor="fuse: true; fuseTimeout: 1000"
                position="0 0 -1"
                geometry="primitive: circle; radius: 0.005;"
                material="color: red; shader: flat"
                animation="property: components.material.material.color;
                    type: color;
                    to: white;
                    dur: 1000;
                    dir: alternate;
                    loop: true">
        </a-entity>
        </a-entity>
           


        <!-- Entorn 360 inicial -->
        <a-sky id="sky" src="#i01"></a-sky>
        <a-plane id="plano" position="0 -1 -2" src="#plano" rotation="0 0 0" scale="2 1 2"></a-plane>
       
        <!--boto d'anar a la torre-->
        <a-sphere id="esfera"  bototorre="" position="-0.7 -0.7 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botopati="" position="-0.32 -1 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botoplanta2="" position="0.035 -1 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botoplanta1="" position="-0.13 -1.25 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botoplanta-1="" position="-0.13 -1.35 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botocisterna="" position="-0.03 -1.35 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botoermita="" position="0.18 -1.36 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botocastell="" position="0.68 -1.36 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>

        <a-sphere id="esfera"  botobruh="" position="0.36 -1 -2" radius="0.03" color="blue"
        animation="property: scale; dur: 1000;  to: 1.2 1.2 1.2; dir: alternate;  loop: true"
        ></a-sphere>
       
     
      <!-- Element de so -->
      <a-entity id="sound" sound="src: #audio1"></a-entity>
      <a-entity id="sound1" sound="src: #Pati"></a-entity>
      <a-entity id="sound2" sound="src: #Planta2"></a-entity>
      <a-entity id="sound3" sound="src: #Planta1"></a-entity>
      <a-entity id="sound4" sound="src: #Planta-1"></a-entity>
      <a-entity id="sound5" sound="src: #cisterna"></a-entity>
      <a-entity id="sound6" sound="src: #ermita"></a-entity>
    </a-scene>


    <script>
      const sky = document.querySelector('#sky');
      const sound = document.querySelector('#sound');
     
      //elimina el moviment de les tecles del cursor
      document.querySelector("[camera]").removeAttribute("wasd-controls");
       


        AFRAME.registerComponent("bototorre", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
                sky.setAttribute('src', '#i02'); //Mostra la imatge de la torre                
                if (sound.components.sound.isPlaying) {  
                        sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
                }
                sound.setAttribute('sound', 'src', '#audio1'); // Assigna l'audio que toca
                sound.components.sound.playSound();    // Reprodueix el so      
            })
            }
            });
            
        AFRAME.registerComponent("botopati", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i03'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound1', 'src', '#Pati'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });

        AFRAME.registerComponent("botoplanta2", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i04'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound2', 'src', '#Planta2'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });    
        
        AFRAME.registerComponent("botoplanta1", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i05'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound3', 'src', '#Planta1'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });  

        AFRAME.registerComponent("botoplanta-1", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i06'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound4', 'src', '#Planta-1'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });

        AFRAME.registerComponent("botocisterna", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i07'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound5', 'src', '#cisterna'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });

        AFRAME.registerComponent("botoermita", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i08'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound6', 'src', '#ermita'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });

        AFRAME.registerComponent("botocastell", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i09'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound7', 'src', '#castell'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });

        AFRAME.registerComponent("botobruh", {
        init: function() {  
            this.el.addEventListener("click", (e) => {        
              sky.setAttribute('src', '#i10'); //Mostra la imatge de la torre                
              if (sound.components.sound.isPlaying) {  
                      sound.components.sound.stopSound(); // Para el so si ja s'està reproduint
              }
              sound.setAttribute('sound', 'src', '#'); // Assigna l'audio que toca
              sound.components.sound.playSound();    // Reprodueix el so      
          })
          }
          });
   
    </script>
  </body>
</html>
